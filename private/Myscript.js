$(document).ready(function() {
    $.ajax({
        type: "GET",
        url: "data.csv",
        dataType: "text",
        success: function(data) {processData(data);}
     });
     $("#validate").click(function(){
        console.log("hello")
        var trace1 = {
            x: ["2011/01/01 00:00:00",
            "2011/01/02 00:00:00",
            "2011/01/03 00:00:00",
            "2011/01/04 00:00:00",
            "2011/01/05 00:00:00",
            "2011/01/06 00:00:00",
            "2011/01/07 00:00:00",
            "2011/01/08 00:00:00",
            "2011/01/09 00:00:00",
            "2011/01/10 00:00:00",
            "2011/01/11 00:00:00",
            "2011/01/12 00:00:00",
            "2011/01/13 00:00:00",
            "2011/01/14 00:00:00",
            "2011/01/15 00:00:00",
            "2011/01/16 00:00:00",
            "2011/01/17 00:00:00",
            "2011/01/18 00:00:00",
            "2011/01/19 00:00:00",
            "2011/01/20 00:00:00",
            "2011/01/21 00:00:00",
            "2011/01/22 00:00:00",
            "2011/01/23 00:00:00",
            "2011/01/24 00:00:00",
            "2011/01/25 00:00:00",
            "2011/01/26 00:00:00",
            "2011/01/27 00:00:00",
            "2011/01/28 00:00:00",
            "2011/01/29 00:00:00",
            "2011/01/30 00:00:00",
            "2011/01/31 00:00:00",
            "2011/02/01 00:00:00",
            "2011/02/02 00:00:00",
            "2011/02/03 00:00:00",
            "2011/02/04 00:00:00",
            "2011/02/05 00:00:00",
            "2011/02/06 00:00:00",
            "2011/02/07 00:00:00",
            "2011/02/08 00:00:00",
            "2011/02/09 00:00:00",
            "2011/02/10 00:00:00",
            "2011/02/11 00:00:00",
            "2011/02/12 00:00:00",
            "2011/02/13 00:00:00",
            "2011/02/14 00:00:00",
            "2011/02/15 00:00:00",
            "2011/02/16 00:00:00",
            "2011/02/17 00:00:00",
            "2011/02/18 00:00:00",
            "2011/02/19 00:00:00",
            "2011/02/20 00:00:00",
            "2011/02/21 00:00:00",
            "2011/02/22 00:00:00",
            "2011/02/23 00:00:00",
            "2011/02/24 00:00:00",
            "2011/02/25 00:00:00",
            "2011/02/26 00:00:00",
            "2011/02/27 00:00:00",
            "2011/02/28 00:00:00",
            "2011/03/01 00:00:00"],
            y: [4825,
                6206,
                9191,
                9260,
                3480,
                8103,
                8194,
                4764,
                4382,
                7677,
                6979,
                7850,
                7622,
                7242,
                6442,
                1431,
                1983,
                5344,
                2475,
                7718,
                7229,
                3474,
                3134,
                3105,
                3067,
                7707,
                2162,
                3963,
                8693,
                4910,
                6372,
                8676,
                3873,
                8641,
                3061,
                1429,
                4443,
                7545,
                5118,
                4107,
                3375,
                5467,
                2239,
                1492,
                8205,
                1507,
                9753,
                6771,
                1106,
                5065,
                6134,
                5208,
                7730,
                1206,
                6864,
                3383,
                3933,
                8056,
                1554,
                6691
                ,
                ],
            type: 'scatter'
          };
          
          var data = [trace1];
          
          Plotly.newPlot('myDiv', data);
        // $("#pId").append("<div><h1>Hello</h1><div>")
    })
});



function processData(allText) {
    var allTextLines = allText.split(/\r\n|\n/);
    var headers = allTextLines[0].split(',');
    var lines = [];

    for (var i=1; i<allTextLines.length; i++) {
        var data = allTextLines[i].split(',');
        console.log(data)
        if (data.length == headers.length) {

            var tarr = [];
            for (var j=0; j<headers.length; j++) {
                tarr.push(headers[j]+":"+data[j]);
            }
            lines.push(tarr);
        }
    }
    // alert(lines);
}
